@using HelpfulHaversack.Web.Models.Dto
@model IEnumerable<TreasuryDto>

<div class="card shadow border-0 mt-4">
	<div class="card-header bg-secondary bg-gradient ml-0 py-3">
		<div class="row">
			<div class="col-12 text-center">
				<h1 class="text-white">Treasury List</h1>
			</div>
		</div>
	</div>
	<div class="card-body p-4">
		<div class="row pb-3">
			<div class="col-6">
			</div>
			<div class="col-6 text-end">
				<a class="btn btn-success"><i class="bi bi-plus-square" data-toggle="modal" data-target="#createModal"></i> Create New Treasury</a>
			</div>
		</div>
		<div class="container">
			<div class="row">
				<div class="col">
					<table class="table table-striped border-black border">
						<thead>
							<tr>
								<th class="fw-bold">
									Name
								</th>
								<th class="fw-bold">
									Number of Items
								</th>
								<th></th>
								<th></th>
								<th></th>
								<th></th>
								<th></th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							@foreach(var treasury in Model)
							{
								<tr>
									<td>
										@treasury.Name
									</td>
									<td>
										@((treasury.Inventory.Count()).ToString())
									</td>
									<td>
										PP: @(treasury.PP.ToString())
									</td>
									<td>
										GP: @(treasury.GP.ToString())
									</td>
									<td>
										EP: @(treasury.EP.ToString())
									</td>
									<td>
										SP: @(treasury.SP.ToString())
									</td>
									<td>
										CP: @(treasury.CP.ToString())
									</td>
									<td>
										<a class="btn btn-secondary float-end" data-bs-toggle="collapse" data-bs-target="#row-@treasury.TreasuryId">
											<i class="bi bi-chevron-down"></i>
										</a>
									</td>
								</tr>
								<tr class="hiddenRow">
									<td colspan="8">	
										<div class="collapse" id="row-@treasury.TreasuryId">
											<div class="row border-bottom border-black">
												<div class="col">
													Name
												</div>
												<div class="col">
													Quantity
												</div>
												<div class="col">
													Weight (lbs.)
												</div>
												<div class="col">
													Value
												</div>
												<div class="col">
													Type
												</div>
												<div class="col">
													Rarity
												</div>
												<div class="col">
													<a class="btn btn-info btn-sm" asp-area="" asp-controller="Treasury" asp-action="TreasuryManage" asp-route-TreasuryId="@treasury.TreasuryId"><i class="bi bi-pencil"> Manage</i></a>
												</div>
											</div>
											<div class="container">
												@foreach(var item in treasury.Inventory)
												{
													<div class="row subRow">
														<div class="col">
															@item.Name
														</div>
														<div class="col">	
															x1
														</div>
														<div class="col">
															@item.Weight
														</div>
														<div class="col">
															@item.Value
														</div>
														<div class="col">
															@item.Type
														</div>
														<div class="col">
															@item.Rarity
														</div>
														<div class="col"></div>
													</div>
												}
											</div>
										</div>
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			</div>
		</div>

	</div>
</div>